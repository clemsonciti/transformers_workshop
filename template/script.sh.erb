#!/usr/bin/env bash

<%

# Set our working directory.
working_dir = Pathname.new(ENV['HOME'])

%>


# Benchmark info
echo "TIMING - Starting main script at: $(date)"

# Set working directory to home directory
cd "${HOME}"

#
# Start Jupyter Notebook Server
#

module purge
module load anaconda3/2022.10 cuda/12.1.1

set -x
module list
# Load the environment (if specified)
source activate /software/spackages/linux-rocky8-x86_64/gcc-9.5.0/anaconda3-2022.10-dtqfczcbv33ugxmsznhll4vjexdcxjfn/envs/pytorch_workshop_slurm

# Benchmark info
echo "TIMING - Starting jupyter at: $(date)"

# Launch the Jupyter Notebook Server
set -x

jupyter lab --config="${CONFIG_FILE}" --no-browser "<%= working_dir.to_s %>"
